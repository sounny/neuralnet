<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Interactive neural network builder in vanilla JavaScript, visualize and experiment with MIM architecture.">

    <!-- Title -->
    <title>Interactive Neural Network Builder</title>

    <!-- Stylesheet -->
    <link rel="stylesheet" href="style.css">

    <!-- Lucide Icons (deferred) -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js" defer></script>
</head>
<body>
    <!-- Container -->
    <div class="container">
        <!-- Header Section -->
        <header class="header">
            <h1>Interactive Neural Network Builder</h1>
            <p>Explore how a neural network learns. This site lets you build and watch a tiny network work. Start with Martin's Image Recognition Machine (MIM) and change it to see what happens.</p>
        </header>

        <!-- Controls -->
        <div class="controls-section">
            <h3>Network Controls</h3>
            <p>These buttons let you adjust the network. Add layers to give it more thinking steps, or change the activation function to see how the neurons react.</p>
            <div class="controls">
                <button id="addLayerBtn" class="btn btn-blue">
                    <i data-lucide="plus"></i>
                    Add Hidden Layer
                </button>
                
                <button id="removeLayerBtn" class="btn btn-red">
                    <i data-lucide="minus"></i>
                    Remove Layer
                </button>
                
                <button id="resetBtn" class="btn btn-gray">
                    <i data-lucide="rotate-ccw"></i>
                    Reset to MIM
                </button>
                
                <select id="activationSelect" class="select">
                    <option value="sigmoid">Sigmoid</option>
                    <option value="relu">ReLU</option>
                    <option value="tanh">Tanh</option>
                    <option value="linear">Linear</option>
                </select>
                
                <button id="showMathBtn" class="btn btn-green">
                    <i data-lucide="book-open"></i>
                    Show Math
                </button>

                <button id="themeToggle" class="btn btn-gray">
                    <i data-lucide="moon"></i>
                    Dark Mode
                </button>
            </div>
            <p id="activationInfo" class="activation-info"></p>
        </div>

        <!-- Input Pattern Editor -->
        <div class="input-section">
            <h3>Input Pattern (4-pixel image)</h3>
            <p>The network reads a tiny 2x2 picture. Click a square to flip it on or off, or use a preset to load a pattern.</p>
            <div class="input-controls">
                <div class="pixel-grid" id="pixelGrid">
                    <button class="pixel" data-index="0"></button>
                    <button class="pixel" data-index="1"></button>
                    <button class="pixel" data-index="2"></button>
                    <button class="pixel" data-index="3"></button>
                </div>
                
                <div class="pattern-buttons">
                    <button class="pattern-btn" data-pattern="1,0,0,1">Diagonal &#92;</button>
                    <button class="pattern-btn" data-pattern="0,1,1,0">Diagonal /</button>
                    <button class="pattern-btn" data-pattern="1,1,0,0">Horizontal</button>
                    <button class="pattern-btn" data-pattern="1,0,1,0">Vertical</button>
                    <button class="pattern-btn" data-pattern="0,1,1,1">Cross</button>
                    <button class="pattern-btn" data-pattern="0,0,0,0">Empty</button>
                    <button class="pattern-btn" data-pattern="1,1,1,1">Full</button>
                </div>
            </div>
        </div>

        <!-- Network Visualization -->
        <div class="visualization-section">
            <h3>Live Network Visualization</h3>
            <p>The picture below shows the network working. Circles are neurons and lines are connections. Bright circles mean high activation. Line color and thickness show the weight: blue for positive, red for negative.</p>
            <div class="network-container" id="networkContainer">
                <svg id="networkSvg" class="network-svg"></svg>
                <div id="neuronsContainer" class="neurons-container"></div>
            </div>
        </div>

        <!-- Results Section -->
        <div class="results-section">
            <h3>Network Output</h3>
            <p>The output layer shows what the network thinks. In MIM, the two numbers tell how strongly each diagonal is detected. Values near 1 mean strong matches.</p>
            <div id="outputResults" class="output-results"></div>
            <p id="predictionText" class="prediction-text"></p>
            <div class="output-info">
                <p>In the original MIM: Output 0 = Diagonal &#92;, Output 1 = Diagonal /</p>
                <p>Values closer to 1.0 indicate stronger detection</p>
            </div>
        </div>

        <!-- Weight Matrices -->
        <div class="weights-section">
            <h3>Weight Matrices</h3>
            <p>Weights are what the network learns. They set how strongly one neuron influences another. Change them to see how the output shifts.</p>
            <div id="weightMatrices" class="weight-matrices"></div>
        </div>

        <!-- Mathematical Explanation -->
        <div id="mathSection" class="math-section" style="display: none;">
            <h3>Mathematical Breakdown</h3>
            <p>Here you can follow each forward pass. Inputs are multiplied by weights, a bias is added, and an activation function creates the neuron's output.</p>
            <div id="mathContent" class="math-content"></div>
        </div>

        <!-- Glossary Section -->
        <div class="glossary-section">
            <h2>Glossary of Terms</h2>
            <div class="glossary-grid">
                <div class="glossary-card" id="glossary-neural-network">
                    <div class="glossary-term">Neural Network</div>
                    <div class="glossary-definition">A computational model inspired by the human brain, composed of interconnected nodes (neurons) that process information to recognize patterns and make decisions.</div>
                </div>

                <div class="glossary-card" id="glossary-neuron">
                    <div class="glossary-term">Neuron</div>
                    <div class="glossary-definition">The basic unit of a neural network. It receives input, processes it, and produces an output value (its activation).</div>
                </div>

                <div class="glossary-card" id="glossary-layers">
                    <div class="glossary-term">Layers</div>
                    <div class="glossary-definition">Neurons are organized into layers. The <strong>Input Layer</strong> receives the initial data. <strong>Hidden Layers</strong> perform intermediate computations. The <strong>Output Layer</strong> produces the final result.</div>
                </div>

                <div class="glossary-card" id="glossary-weight">
                    <div class="glossary-term">Weight</div>
                    <div class="glossary-definition">A value that represents the strength of the connection between two neurons. Higher weights (positive or negative) mean the input from one neuron has a greater influence on the next.</div>
                </div>

                <div class="glossary-card" id="glossary-bias">
                    <div class="glossary-term">Bias</div>
                    <div class="glossary-definition">A value added to the sum of weighted inputs before the activation function is applied. A bias allows a neuron to shift its activation function, making it more or less likely to fire.</div>
                </div>

                <div class="glossary-card" id="glossary-activation-function">
                    <div class="glossary-term">Activation Function</div>
                    <div class="glossary-definition">A mathematical function that determines the output of a neuron based on its total input. It introduces non-linearity, allowing the network to learn complex patterns. Examples: Sigmoid, ReLU, Tanh.</div>
                </div>

                <div class="glossary-card" id="glossary-forward-pass">
                    <div class="glossary-term">Forward Pass</div>
                    <div class="glossary-definition">The process of feeding input data through the network from the input layer to the output layer to generate a prediction.</div>
                </div>

                <div class="glossary-card" id="glossary-mim">
                    <div class="glossary-term">MIM</div>
                    <div class="glossary-definition">Martin's Image Recognition Machine - a simple, hand-crafted neural network designed specifically to recognize diagonal lines in a 2x2 grid.</div>
                </div>
            </div>
        </div>

        <!-- Learning Exercises -->
        <div class="learning-section">
            <h2>Try It Yourself</h2>
            <ul>
                <li>Predict the network's output before choosing a preset pattern.</li>
                <li>Add or remove a hidden layer and observe the change in activations.</li>
                <li>Switch activation functions to see how each one behaves.</li>
                <li>Edit a weight value to explore how outputs shift.</li>
            </ul>
        </div>
    </div>

    <!-- Main script (deferred) -->
    <script src="script.js" defer></script>
</body>
</html>
